# wrangler.toml - Cloudflare Worker Configuration for Class Genius API

name = "class-genius-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# ==================== Account Settings ====================
# Uncomment and set your account ID (or set via CLOUDFLARE_ACCOUNT_ID env var)
# account_id = "your-account-id"

# ==================== KV Namespaces ====================
# Create these with: wrangler kv:namespace create "NAMESPACE_NAME"
# Then update the IDs below

[[kv_namespaces]]
binding = "API_KEYS"
id = "YOUR_API_KEYS_NAMESPACE_ID"
preview_id = "YOUR_API_KEYS_PREVIEW_ID"

[[kv_namespaces]]
binding = "RATE_LIMITER"
id = "YOUR_RATE_LIMITER_NAMESPACE_ID"
preview_id = "YOUR_RATE_LIMITER_PREVIEW_ID"

[[kv_namespaces]]
binding = "LOGS"
id = "YOUR_LOGS_NAMESPACE_ID"
preview_id = "YOUR_LOGS_PREVIEW_ID"

[[kv_namespaces]]
binding = "JOBS"
id = "YOUR_JOBS_NAMESPACE_ID"
preview_id = "YOUR_JOBS_PREVIEW_ID"

# ==================== Environment Variables ====================
# Non-secret values can go here
[vars]
# RUNPOD_ENDPOINT_ID = "your-endpoint-id"  # Better to use secrets

# ==================== Secrets ====================
# Set these with: wrangler secret put SECRET_NAME
# Required secrets:
# - RUNPOD_API_KEY
# - RUNPOD_ENDPOINT_ID

# ==================== Custom Domain (Optional) ====================
# Add your custom domain in the Cloudflare dashboard:
# Workers & Pages > Your Worker > Settings > Triggers > Custom Domains
# Example: api.classgenius.com

# ==================== Development Settings ====================
[dev]
port = 8787
local_protocol = "http"

# ==================== Build Settings ====================
[build]
command = "npm install && npm run build"

# ==================== Observability ====================
[observability]
enabled = true
