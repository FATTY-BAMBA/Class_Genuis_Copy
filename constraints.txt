# --- toolchain managed in Dockerfile; do NOT constrain here ---
# pip
# setuptools
# wheel
# FIXED: Remove restrictive packaging constraint that causes pip 24.x conflicts
packaging>=20.0

# Torch stack - CRITICAL: PyTorch 2.1.2 for EasyOCR + CUDA 11.8 + cuDNN 8.7 compatibility
torch==2.1.2
torchvision==0.16.2
torchaudio==2.1.2
torchmetrics==1.4.2
lightning==2.4.0

# HF ecosystem - These will be auto-resolved by faster-whisper
# transformers==4.19.4  # Commented out - let pip resolve
# tokenizers==0.15.2    # Commented out - let pip resolve
sentencepiece>=0.2.0,<0.3
accelerate>=1.1.1
optimum>=1.22.0
peft>=0.17.1
safetensors>=0.4.5

openai==1.55.3
# faster-whisper==0.10.1  # Commented out - installed separately in Dockerfile
google-generativeai==0.8.3
rouge-score==0.1.2
tabulate==0.9.0
wandb==0.18.7
rich==13.9.4

# Imaging / vision
opencv-python-headless==4.7.0.72
pillow==9.5.0
easyocr==1.7.1
imgaug==0.4.0

# OCR / misc deps
attrdict==2.0.1
beautifulsoup4==4.13.4
fire==0.7.1
fonttools==4.51.0
lmdb==1.7.3
openpyxl==3.1.5
pdf2docx==0.5.8
premailer==3.10.0
rapidfuzz==3.13.0
visualdl==2.5.3

# Critical pins to avoid segfaults / ABI issues - ALIGNED WITH REQUIREMENTS
# CRITICAL: NumPy 1.26.4 is required for PyTorch 2.1.2 (will crash with NumPy 2.x)
numpy==1.26.4
PyMuPDF==1.19.0
python-docx==1.2.0
protobuf>=3.20.0,<4

# SciPy stack
llvmlite==0.43.0
numba==0.60.0
tqdm==4.67.1
scipy==1.10.1
scikit-learn==1.0.2
scikit-image==0.21.0
onnxruntime==1.15.1

# Background workers
redis==6.0.0
celery==5.5.2
billiard==4.2.1
vine==5.1.0

ffmpeg-python==0.2.0
pydub==0.25.1
pytz==2023.3.post1
tzlocal==4.3
pycocoevalcap==1.2
